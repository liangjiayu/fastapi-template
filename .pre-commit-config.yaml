# Pre-commit é…ç½® - æç®€ç‰ˆæœ¬ï¼Œåªä¿ç•™æ ¸å¿ƒæ£€æŸ¥
# ç†å¿µï¼šæ ¼å¼åŒ–äº¤ç»™å·¥å…·ï¼Œåªæ£€æŸ¥çœŸæ­£çš„ä»£ç é”™è¯¯
#
# å®‰è£…: uv run pre-commit install
# æ‰‹åŠ¨è¿è¡Œ: uv run pre-commit run --all-files
# è·³è¿‡æ£€æŸ¥: git commit --no-verify

repos:
  # Ruff - å”¯ä¸€éœ€è¦çš„æ£€æŸ¥å·¥å…·
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.15.0
    hooks:
      # 1. ä»£ç æ ¼å¼åŒ–ï¼ˆè‡ªåŠ¨ä¿®å¤ï¼šç¼©è¿›ã€å¼•å·ã€ç©ºæ ¼ã€å¯¼å…¥æ’åºç­‰ï¼‰
      - id: ruff-format
        name: "ğŸ¨ Format Code"

      # 2. ä»£ç æ£€æŸ¥ï¼ˆåªæ£€æŸ¥ F ç±»é”™è¯¯ï¼šæœªå®šä¹‰å˜é‡ã€æœªä½¿ç”¨å¯¼å…¥ç­‰ï¼‰
      - id: ruff
        name: "ğŸ” Check Errors"
        args: [--fix, --exit-non-zero-on-fix]

# æ’é™¤æ–‡ä»¶
exclude: |
  (?x)^(
    \.venv/|
    \.git/|
    __pycache__/|
    alembic/versions/.*\.py|
    \.pytest_cache/|
    \.ruff_cache/
  )$
